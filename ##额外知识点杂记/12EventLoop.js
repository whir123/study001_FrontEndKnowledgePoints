/**
 * âš ï¸ ã€Event Loopã€‘JavaScriptæ‰§è¡Œå¼‚æ­¥çš„æœºåˆ¶
 * âš ï¸ åè°ƒã€æµè§ˆå™¨ / Node.jsã€‘ ç¯å¢ƒ
 * âš ï¸ å¤„ç†ã€ä»»åŠ¡é˜Ÿåˆ—ã€‘ã€å®ä»»åŠ¡ / å¾®ä»»åŠ¡ã€‘
 * âš ï¸ åœ¨ã€ä¸»çº¿ç¨‹ã€‘ç©ºé—²æ—¶æ‰§è¡Œä»»åŠ¡ å®ç°ã€éé˜»å¡ä¸å“åº”æ€§ã€‘
 */

// â­ï¸ äº‹ä»¶å¾ªç¯å·¥ä½œåŸç†ï¼š
    // æ ¸å¿ƒç»„æˆï¼š
    // 1 è°ƒç”¨æ ˆ ã€ Call Stack ã€‘
    // 2 å † ã€ Heap ã€‘
    // 3 ä»»åŠ¡é˜Ÿåˆ— ã€ Task Queues ã€‘
    // 4 äº‹ä»¶å¾ªç¯æœ¬èº«

// â­ï¸ ä»»åŠ¡åˆ†ç±»ï¼š
    // âš ï¸ å®ä»»åŠ¡ ã€ Macro Tasks ã€‘
    // ï¼ˆé€šå¸¸æ¯æ¬¡äº‹ä»¶å¾ªç¯å¤„ç†ä¸€ä¸ªå®ä»»åŠ¡ é¢—ç²’åº¦æ¯”è¾ƒå¤§ ä¹Ÿæœ‰ä¾‹å¤–ï¼‰
    // --- setTimeout() setInterval() DOMäº‹ä»¶ I/Oæ“ä½œå®Œæˆå›è°ƒ UIæ¸²æŸ“

    // âš ï¸ å¾®ä»»åŠ¡ ã€ Micro Tasks ã€‘
    // ï¼ˆé€šå¸¸å’Œå½“å‰æ‰§è¡Œä»»åŠ¡ç´§å¯†ç›¸å…³ éœ€è¦å°½å¿«æ‰§è¡Œ äº‹ä»¶å¾ªç¯è¿­ä»£é˜¶æ®µä¼šæ‰§è¡Œæ‰€æœ‰å¯ç”¨çš„å¾®ä»»åŠ¡ ç›´åˆ°æ¸…ç©ºé˜Ÿåˆ—ï¼‰
    // --- Promise.then() / .catch() / .finally() queueMicrotask()

// ğŸš¨ äº‹ä»¶å¾ªç¯çš„å•è½®æµç¨‹
    // 1 æ‰§è¡ŒåŒæ­¥ä»£ç  ç›´åˆ°è°ƒç”¨æ ˆæ¸…ç©º
    // 2 æ‰§è¡Œæ‰€æœ‰ã€å¾®ä»»åŠ¡ã€‘--- æ¸…ç©º
        // è‹¥äº§ç”Ÿæ–°çš„å¾®ä»»åŠ¡ ç«‹å³æ·»åŠ åˆ°æœ«å°¾ å½“å‰é˜¶æ®µæ‰§è¡Œ
    // 3 æ‰§è¡Œä¸€ä¸ªå®ä»»åŠ¡ é˜Ÿåˆ—å–ç¬¬ä¸€ä¸ªæ‰§è¡Œ
    // 4 é‡å¤ä¸Šè¿°è¿‡ç¨‹

console.log('1.Start');

setTimeout(function(){
    console.log('4.setTimeout callback (Macro task)');
},0);

Promise.resolve('Promise resolved').then(function(val){
    console.log('3.Promise resolved callback (Micro task):', val);
});

console.log('2.End');

// 1.Start
// 2.End
// 3.Promise resolved callback (Micro task): Promise resolved
// 4.setTimeout callback (Macro task)

// âš ï¸ Node.js ä¸­ï¼šã€ process.nextTick ã€‘-- ä¼˜å…ˆçº§é«˜äºæ™®é€šå¾®ä»»åŠ¡